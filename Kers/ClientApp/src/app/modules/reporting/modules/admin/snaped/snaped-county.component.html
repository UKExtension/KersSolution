<div class="alert alert-danger alert-dismissible fade in" role="alert" *ngIf="errorMessage">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span>
    </button>
    <strong>Error: </strong> {{errorMessage}}
</div>
<div class="text-right"><a class="btn btn-default btn-xs" routerLink="/reporting/admin/snaped">Snap-Ed Admin Dashboard</a></div>
<div *ngIf="county">    
    <h2>Snap-Ed Assistants</h2>
    <user-directory-list [county]="county" [onlySnapAssistants]="true"></user-directory-list><br><br>
    <h2>With Commitment</h2>
    <user-directory-list [county]="county" [onlyWitSnapCommitment]="true"></user-directory-list><br><br>
    <div class="col-xs-12">
        <snape-ed-stats [planningUnit]="county" (onCalculated)="storeHours($event)"></snape-ed-stats>
    </div><br><br>
    <snape-ed-commitment-stats [planningUnit]="county" [fiscalYear]="fiscalYear" (onCalculated)="storeCommitment($event)"></snape-ed-commitment-stats>
    <br><br>
    <div *ngIf="countyBudget">
        <h2>County Budget</h2>
        <div *ngIf="!editBudget">
            <strong>{{countyBudget | currency:'USD':'symbol' }}</strong> &nbsp;&nbsp;<a class="btn btn-info btn-xs" (click)="editBudget = true">edit</a>
        </div>
        <div *ngIf="editBudget">
            <form class="form-inline" novalidate (ngSubmit)="onCountyBudgetSubmit()" [formGroup]="budgetForm">
                <div class="form-group">
                    <label class="sr-only" for="annualBudget">Annual Budget (in dollars)</label>
                    <div class="input-group" style="margin-top:4px;">
                        <div class="input-group-addon">$</div>
                        <input type="text" class="form-control" formControlName="annualBudget" id="annualBudget" placeholder="Annual Budget">
                        <div class="input-group-addon">.00</div>
                    </div>
                </div>&nbsp;
                <button type="submit" class="btn btn-primary" [disabled]="budgetForm.invalid"  >Update</button>
                <button class="btn btn-info" (click)="editBudget = false">Cancel</button>
            </form>      
        </div>
    </div><br><br>
    <h2>Reimbursements</h2>
    <div *ngIf="!newReinbursment" class="text-right">
            <a class="btn btn-info btn-xs" (click)="newReinbursment = true">+ new reimbursement</a>
    </div>
    <div *ngIf="newReinbursment">
        <snaped-reimbursment-form [countyId]="county.id" (onFormCancel)="newReinbursment = false" (onFormSubmit)="newReinbursmentSubmit($event)"></snaped-reimbursment-form>
    </div>


    <table class="table table-striped" *ngIf="reimbursments">
        <thead>
            <tr>
                <th>Notes</th>
                <th class="text-right">Amount</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let reimbursment of reimbursments" [snapedReimbursmentItem]="reimbursment" (onReimbursementDeleted)="reimbursementDeleted($event)" (onReimbursementUpdated)="reimbursementUpdated($event)"></tr>
        </tbody>
        <tfoot>
            <tr>
                <td>Remaining budget: <strong>{{remainingBudget | currency:'USD':'symbol' }}</strong></td>
                <td class="text-right">Total: <strong>{{totalReimbursementsAmount | currency:'USD':'symbol' }}</strong></td>
                <td></td>
            </tr>
        </tfoot>               
    </table>
</div>


